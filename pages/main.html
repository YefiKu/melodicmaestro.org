<header id="mainHeader">
    <div class="accountContent">Your account</div>
    <div class="info"><span class="redir" data-redir="library" data-align="left">Library</span> | <span class="redir" data-redir="editor" data-align="left">Editor</span></div>
</header>
<div class="wrapper">
    <h1 id="greeting"></h1>
</div>
<script>
    function refreshMainPage() {
        let h1 = document.getElementById('greeting');
        fetch('/me', { method: 'POST' }).then(response => response.blob()).then(blob => blob.text()).then(text => {
            let data = JSON.parse(text);
            if (data.loggedin) {
                h1.innerHTML = "Hello, " + data.username + "!";
            } else {
                h1.innerHTML = 'Hello! You need to <a class="redir" data-redir="login" data-align="left">login</a>';
            }
        })
    }
    refreshMainPage();
</script>